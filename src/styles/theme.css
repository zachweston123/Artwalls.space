/* Global theme tokens + base theming.
   Do NOT redesign; enforce consistent dark mode + single font everywhere. */

/* A) Tokens (exact) */
:root {
  /* base */
  --bg: #ffffff;
  --surface-1: #f7f8fb;
  --surface-2: #ffffff;
  --surface-3: #f1f4fb;
  --border: rgba(0,0,0,.10);
  --border-subtle: rgba(0,0,0,.05);
  --border-hover: rgba(0,0,0,.18);

  /* text */
  --text: #0b0c0f;
  --text-muted: rgba(11,12,15,.70);

  /* brand accents (KEEP) */
  --blue: #2f6bff;
  --blue-hover: #2457d6;
  --on-blue: #ffffff;
  --blue-muted: rgba(47,107,255,.14);

  --green: #22c55e;
  --green-muted: rgba(34,197,94,.15);

  /* semantic */
  --warning: #f59e0b;
  --warning-muted: rgba(245,158,11,.12);
  --danger: #ef4444;
  --danger-muted: rgba(239,68,68,.10);
  --info: var(--blue);
  --info-muted: var(--blue-muted);

  /* compare-table */
  --table-row-odd: var(--surface-2);
  --table-row-even: var(--surface-1);
  --table-row-hover: var(--surface-3);
  --table-divider: rgba(0,0,0,0.05);

  /* focus */
  --focus: rgba(47,107,255,.45);

  /* skeleton / shimmer */
  --skeleton: var(--surface-3);

  /* Back-compat for existing tokenized components */
  --accent: var(--blue);
  --accent-hover: var(--blue-hover);
  --accent-contrast: var(--on-blue);
  --success: var(--green);
  --success-muted: var(--green-muted);

  /* shadcn/ui token bridge — maps to Tailwind's "bg-card", "text-muted-foreground", etc. */
  --background: var(--bg);
  --foreground: var(--text);
  --card: var(--surface-1);
  --card-foreground: var(--text);
  --muted: var(--surface-3);
  --muted-foreground: var(--text-muted);
  --primary: var(--blue);
  --primary-foreground: var(--on-blue);
  --secondary: var(--surface-3);
  --secondary-foreground: var(--text);
  --destructive: var(--danger);
  --accent-bg: var(--surface-3);
  --accent-foreground: var(--text);
  --input: var(--border);
  --ring: var(--focus);
  --radius: 0.75rem;
}

html[data-theme="dark"] {
  --bg: #000000;
  --surface-1: #0f1623;
  --surface-2: #121b2b;
  --surface-3: #17233a;
  --border: rgba(255,255,255,.10);
  --border-subtle: rgba(255,255,255,.06);
  --border-hover: rgba(255,255,255,.18);

  --text: rgba(255,255,255,.92);
  --text-muted: rgba(255,255,255,.68);

  --blue: #3b7bff;
  --blue-hover: #2f6bff;
  --on-blue: #ffffff;
  --blue-muted: rgba(59,123,255,.18);

  --green: #34d399;
  --green-muted: rgba(52,211,153,.16);

  --warning: #fbbf24;
  --warning-muted: rgba(251,191,36,.14);
  --danger: #f87171;
  --danger-muted: rgba(248,113,113,.14);

  --focus: rgba(59,123,255,.55);

  --skeleton: var(--surface-3);

  /* compare-table */
  --table-row-odd: var(--surface-2);
  --table-row-even: var(--surface-3);
  --table-row-hover: rgba(255,255,255,0.04);
  --table-divider: rgba(255,255,255,0.06);
}

html[data-theme="light"] {
  color-scheme: light;
}

html[data-theme="dark"] {
  color-scheme: dark;
}

/* B) Apply globally (exact) */
html, body {
  background: var(--bg);
  color: var(--text);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
  /* Use small viewport height to avoid top/bottom bars on mobile browsers */
  min-height: 100svh;
}

#root, #app, main {
  background: var(--bg);
  /* Keep containers full height with small viewport units */
  min-height: 100svh;
}

/* 1) One global font (inherit everywhere). */
*, *::before, *::after {
  font-family: inherit;
}

/* C) Tokenize core elements.
   Only style STANDALONE inputs (not ones nested inside a custom wrapper).
   Wrapper components like IconInput, SchoolSearch, etc. own the visible
   border/background on their outer <div>, so inner inputs must stay bare. */
input:not([data-bare]),
textarea,
select {
  color: var(--text);
}

/* Standalone inputs that are NOT inside a wrapper get the full treatment.
   Wrapper components mark their shell with [data-input-wrapper]. */
input:not([data-bare]):not([data-input-wrapper] input),
textarea,
select {
  background: var(--surface-1);
  border: 1px solid var(--border);
}

/* Inner inputs inside wrappers: transparent bg, no border */
[data-input-wrapper] input {
  background: transparent;
  border: none;
}

input::placeholder,
textarea::placeholder {
  color: var(--text-muted);
}

/* Focus ring only on standalone inputs; wrappers handle their own */
input:not([data-input-wrapper] input):focus,
textarea:focus,
select:focus {
  outline: none;
  box-shadow: 0 0 0 3px var(--focus);
}

table {
  color: var(--text);
}

thead {
  background: var(--surface-3);
}

tbody {
  background: var(--surface-2);
}

tbody tr:hover {
  background: var(--surface-3);
}

th,
td {
  border-color: var(--border);
}

/* Dark-mode overrides for common Tailwind "white island" utilities.
   Keeps UI consistent while components are migrated to tokens. */
html[data-theme="dark"] .bg-white { background-color: var(--surface-2) !important; }
html[data-theme="dark"] .bg-neutral-50,
html[data-theme="dark"] .bg-neutral-100 { background-color: var(--surface-3) !important; }

html[data-theme="dark"] .text-black,
html[data-theme="dark"] .text-neutral-900 { color: var(--text) !important; }

html[data-theme="dark"] .text-neutral-700,
html[data-theme="dark"] .text-neutral-600,
html[data-theme="dark"] .text-neutral-500 { color: var(--text-muted) !important; }

html[data-theme="dark"] .border-neutral-200,
html[data-theme="dark"] .border-neutral-300 { border-color: var(--border) !important; }

/* D) Token utility shims
  This repo does not compile Tailwind at build time, so arbitrary-value
  utilities like `bg-[var(--surface-2)]` would otherwise have no CSS.
  Keep components token-first while ensuring production renders correctly. */

/* Backgrounds */
.bg-\[var\(--bg\)\] { background-color: var(--bg); }
.bg-\[var\(--surface-1\)\] { background-color: var(--surface-1); }
.bg-\[var\(--surface-2\)\] { background-color: var(--surface-2); }
.bg-\[var\(--surface-3\)\] { background-color: var(--surface-3); }
.bg-\[var\(--border\)\] { background-color: var(--border); }
.bg-\[var\(--accent\)\] { background-color: var(--accent); }
.bg-\[var\(--accent-hover\)\] { background-color: var(--accent-hover); }
.bg-\[var\(--blue\)\] { background-color: var(--blue); }
.bg-\[var\(--blue-hover\)\] { background-color: var(--blue-hover); }
.bg-\[var\(--blue-muted\)\] { background-color: var(--blue-muted); }
.bg-\[var\(--on-blue\)\] { background-color: var(--on-blue); }
.bg-\[var\(--green\)\] { background-color: var(--green); }
.bg-\[var\(--green-muted\)\] { background-color: var(--green-muted); }
.bg-\[var\(--warning\)\] { background-color: var(--warning); }
.bg-\[var\(--danger\)\] { background-color: var(--danger); }
.bg-\[var\(--success\)\] { background-color: var(--success); }
.bg-\[var\(--success-muted\)\] { background-color: var(--success-muted); }

/* Text */
.text-\[var\(--text\)\] { color: var(--text); }
.text-\[var\(--text-muted\)\] { color: var(--text-muted); }
.text-\[var\(--accent\)\] { color: var(--accent); }
.text-\[var\(--accent-contrast\)\] { color: var(--accent-contrast); }
.text-\[var\(--blue\)\] { color: var(--blue); }
.text-\[var\(--on-blue\)\] { color: var(--on-blue); }
.text-\[var\(--green\)\] { color: var(--green); }
.text-\[var\(--warning\)\] { color: var(--warning); }
.text-\[var\(--danger\)\] { color: var(--danger); }
.text-\[var\(--success\)\] { color: var(--success); }

/* Borders */
.border-\[var\(--border\)\] { border-color: var(--border); }
.border-\[var\(--accent\)\] { border-color: var(--accent); }
.border-\[var\(--blue\)\] { border-color: var(--blue); }
.border-\[var\(--green\)\] { border-color: var(--green); }
.border-\[var\(--danger\)\] { border-color: var(--danger); }
.border-\[var\(--warning\)\] { border-color: var(--warning); }
.border-\[var\(--success\)\] { border-color: var(--success); }

/* Divide color (pairs with existing divide-x/divide-y utilities) */
.divide-\[var\(--border\)\] > :not([hidden]) ~ :not([hidden]) { border-color: var(--border); }

/* Hover variants */
.hover\:bg-\[var\(--surface-2\)\]:hover { background-color: var(--surface-2); }
.hover\:bg-\[var\(--surface-3\)\]:hover { background-color: var(--surface-3); }
.hover\:bg-\[var\(--accent\)\]:hover { background-color: var(--accent); }
.hover\:bg-\[var\(--accent-hover\)\]:hover { background-color: var(--accent-hover); }
.hover\:bg-\[var\(--blue\)\]:hover { background-color: var(--blue); }
.hover\:bg-\[var\(--blue-hover\)\]:hover { background-color: var(--blue-hover); }
.hover\:bg-\[var\(--green-muted\)\]:hover { background-color: var(--green-muted); }
.hover\:bg-\[var\(--green\)\]:hover { background-color: var(--green); }
.hover\:border-\[var\(--focus\)\]:hover { border-color: var(--focus); }
.hover\:border-\[var\(--blue\)\]:hover { border-color: var(--blue); }
.hover\:border-\[var\(--green\)\]:hover { border-color: var(--green); }
.hover\:text-\[var\(--text\)\]:hover { color: var(--text); }
.hover\:text-\[var\(--text-muted\)\]:hover { color: var(--text-muted); }
.hover\:text-\[var\(--accent\)\]:hover { color: var(--accent); }
.hover\:text-\[var\(--blue\)\]:hover { color: var(--blue); }
.hover\:text-\[var\(--blue-hover\)\]:hover { color: var(--blue-hover); }
.hover\:text-\[var\(--green\)\]:hover { color: var(--green); }

/* Group-hover variants */
.group:hover .group-hover\:bg-\[var\(--surface-3\)\] { background-color: var(--surface-3); }
.group:hover .group-hover\:bg-\[var\(--blue\)\] { background-color: var(--blue); }
.group:hover .group-hover\:bg-\[var\(--green\)\] { background-color: var(--green); }
.group:hover .group-hover\:border-\[var\(--green\)\] { border-color: var(--green); }
.group:hover .group-hover\:text-\[var\(--on-blue\)\] { color: var(--on-blue); }
.group:hover .group-hover\:text-\[var\(--accent-contrast\)\] { color: var(--accent-contrast); }
.group:hover .group-hover\:text-\[var\(--blue\)\] { color: var(--blue); }
.group:hover .group-hover\:text-\[var\(--green\)\] { color: var(--green); }

/* Placeholder variant */
.placeholder\:text-\[var\(--text-muted\)\]::placeholder { color: var(--text-muted); }

/* Disabled variants */
.disabled\:bg-\[var\(--surface-3\)\]:disabled { background-color: var(--surface-3); }
.disabled\:text-\[var\(--text-muted\)\]:disabled { color: var(--text-muted); }

/* Form control accent-color */
.accent-\[var\(--accent\)\] { accent-color: var(--accent); }
.accent-\[var\(--blue\)\] { accent-color: var(--blue); }

/* Focus ring color variants (pairs with existing focus:ring-* utilities) */
.focus\:ring-\[var\(--focus\)\]:focus { --tw-ring-color: var(--focus); }
.focus\:ring-\[var\(--blue\)\]:focus { --tw-ring-color: var(--blue); }
.focus\:ring-\[var\(--green\)\]:focus { --tw-ring-color: var(--green); }
.focus\:ring-\[var\(--danger\)\]:focus { --tw-ring-color: var(--danger); }

/* Focus-visible variants (used in some buttons/tiles) */
.focus-visible\:ring-\[var\(--focus\)\]:focus-visible { --tw-ring-color: var(--focus); }
.focus-visible\:ring-offset-\[var\(--bg\)\]:focus-visible { --tw-ring-offset-color: var(--bg); }

/* Focus-within variants (search inputs, combobox wrappers) */
.focus-within\:border-\[var\(--focus\)\]:focus-within { border-color: var(--focus); }
.focus-within\:ring-2:focus-within {
  --tw-ring-shadow: var(--tw-ring-inset, ) 0 0 0 calc(2px + var(--tw-ring-offset-width, 0px)) var(--tw-ring-color, var(--focus));
  box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);
}
.focus-within\:ring-\[var\(--focus\)\]:focus-within { --tw-ring-color: var(--focus); }
.focus-within\:ring-\[var\(--focus\)\]\/30:focus-within { --tw-ring-color: color-mix(in srgb, var(--focus) 30%, transparent); }

/* Viewport height utility shims (fix dark mode bars on mobile browsers) */
.min-h-svh { min-height: 100svh; }
.h-svh { height: 100svh; }

/* Extra token shims for new design system primitives */
.bg-\[var\(--warning-muted\)\] { background-color: var(--warning-muted); }
.bg-\[var\(--danger-muted\)\] { background-color: var(--danger-muted); }
.bg-\[var\(--info-muted\)\] { background-color: var(--info-muted); }
.bg-\[var\(--skeleton\)\] { background-color: var(--skeleton); }
.border-\[var\(--border-hover\)\] { border-color: var(--border-hover); }
.hover\:border-\[var\(--border-hover\)\]:hover { border-color: var(--border-hover); }
.text-\[var\(--info\)\] { color: var(--info); }

/* Utility shims not present in pre-compiled Tailwind CSS */
.border-none { border-style: none; }
.shadow-none { box-shadow: none; }

/* ── Compare All Plans table ─────────────────────────────── */
.compareTable table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
}
.compareTable thead th {
  background: var(--surface-3);
  padding: 24px 24px;
  vertical-align: middle;
}
@media (min-width: 640px) {
  .compareTable thead th {
    padding: 28px 24px;
  }
}
.compareTable thead tr {
  border-bottom: 1px solid var(--border);
}
.compareTable .plan-header-stack {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
}
.compareTable tbody tr:nth-child(odd) {
  background: var(--table-row-odd);
}
.compareTable tbody tr:nth-child(even) {
  background: var(--table-row-even);
}
.compareTable tbody tr {
  transition: background 0.15s ease;
}
.compareTable tbody tr:hover {
  background: var(--table-row-hover);
}
.compareTable tbody td {
  border-bottom: 1px solid var(--table-divider);
}
.compareTable tbody tr:last-child td {
  border-bottom: none;
}
