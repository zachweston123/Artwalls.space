name = "artwalls-space"
compatibility_date = "2024-01-01"
main = "worker/index.ts"

# Required: set your Cloudflare account_id via environment variable or wrangler CLI
# Do NOT hardcode it here — use: CLOUDFLARE_ACCOUNT_ID env var or `wrangler whoami`
# account_id = "<set via CLOUDFLARE_ACCOUNT_ID env var>"

# Bind the Worker to the main domain /api/* path
routes = [
	{ pattern = "api.artwalls.space/*", zone_name = "artwalls.space" }
]

[vars]
API_BASE_URL = "https://artwalls.space"
PAGES_ORIGIN = "https://artwalls.space"
RATE_LIMIT_ENABLED = "true"

# KV namespace for durable rate-limit counters.
# Create it once:  npx wrangler kv namespace create RATE_LIMIT_KV
# Then paste the id below. Until you do, the worker falls back to in-memory.
# [[kv_namespaces]]
# binding = "RATE_LIMIT_KV"
# id = "<paste id from wrangler kv namespace create>"

# Stripe Price IDs — set via `wrangler secret put` or CI secrets, NOT here
# wrangler secret put STRIPE_SUB_PRICE_STARTER
# wrangler secret put STRIPE_SUB_PRICE_GROWTH
# wrangler secret put STRIPE_SUB_PRICE_PRO

# Other secrets to set via CLI:
# wrangler secret put SUPABASE_URL
# wrangler secret put SUPABASE_SERVICE_ROLE_KEY
# wrangler secret put STRIPE_SECRET_KEY
# wrangler secret put STRIPE_WEBHOOK_SECRET
# wrangler secret put TWILIO_ACCOUNT_SID
# wrangler secret put TWILIO_AUTH_TOKEN
# wrangler secret put TWILIO_FROM_NUMBER
